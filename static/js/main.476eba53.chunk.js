(this.webpackJsonpmovies=this.webpackJsonpmovies||[]).push([[0],{13:function(e,t,c){},15:function(e,t,c){"use strict";c.r(t);var n=c(1),i=c(8),s=c.n(i),a=c(4),l=c(2),r=(c(13),c(5)),o=c(0);var j=function(e){var t=e.comment,c=e.number,n=e.remove;return Object(o.jsxs)("div",{className:"commentItem",children:[Object(o.jsxs)("div",{className:"commentBody",children:[c,". ",t.body]}),Object(o.jsx)("button",{className:"myBtn",onClick:function(){return n(t)},children:"Remove"})]})};var d=function(e){var t=e.children,c=e.visible,n=e.setVisible,i=["myModal"];return c&&i.push("active"),Object(o.jsx)("div",{className:i.join(" "),onClick:function(){return n(!1)},children:Object(o.jsx)("div",{className:"myModalContent",onClick:function(e){return e.stopPropagation()},children:t})})};var m=function(e){var t=e.title,c=e.year,i=e.runtime,s=e.rating,m=Object(n.useState)([]),u=Object(l.a)(m,2),b=u[0],O=u[1],v=Object(n.useState)({id:"",body:""}),h=Object(l.a)(v,2),f=h[0],x=h[1],p=Object(n.useState)(!1),N=Object(l.a)(p,2),g=N[0],y=N[1],w=function(e){O(b.filter((function(t){return t.id!==e.id}))),console.log(e)};return Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("div",{className:"cell",children:t}),Object(o.jsx)("div",{className:"cell",children:c}),Object(o.jsx)("div",{className:"cell",children:i}),Object(o.jsx)("div",{className:"cell",children:s}),Object(o.jsxs)("div",{className:"cell",children:[Object(o.jsx)("button",{onClick:function(){return y(!0)},children:"Open comments"}),Object(o.jsxs)(d,{visible:g,setVisible:y,children:[Object(o.jsxs)("form",{children:[Object(o.jsx)("input",{value:f.body,onChange:function(e){return x(Object(r.a)(Object(r.a)({},f),{},{body:e.target.value}))},className:"myInput",type:"text",placeholder:"Add comment"}),Object(o.jsx)("button",{onClick:function(e){e.preventDefault(),O([].concat(Object(a.a)(b),[Object(r.a)(Object(r.a)({},f),{},{id:Date.now()})])),console.log(f),x({id:"",body:""})},className:"myBtn",children:"Create comment"})]}),b.length?b.map((function(e,t){return Object(o.jsx)(j,{number:t+1,comment:e,remove:w},e.id)})):Object(o.jsx)("div",{children:"No comments added"})]})]})]})};var u=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),c=t[0],i=t[1],s=Object(n.useState)(1),r=Object(l.a)(s,2),j=r[0],d=r[1],u=Object(n.useState)(!0),b=Object(l.a)(u,2),O=b[0],v=b[1],h=Object(n.useState)(100),f=Object(l.a)(h,2),x=f[0],p=f[1];Object(n.useEffect)((function(){(O||document.body.offsetHeight<window.innerHeight)&&(console.log("fetching"),fetch("https://yts.mx/api/v2/list_movies.json?limit=50&page=".concat(j)).then((function(e){return e.json()})).then((function(e){i([].concat(Object(a.a)(c),Object(a.a)(e.data.movies))),d((function(e){return e+1})),p(e.data.movie_count)})).finally((function(){return v(!1)})))}),[O]),Object(n.useEffect)((function(){return document.addEventListener("scroll",N),function(){document.removeEventListener("scroll",N)}}),[]);var N=function(e){e.target.documentElement.scrollHeight-(e.target.documentElement.scrollTop+window.innerHeight)<100&&c.length<x&&v(!0)};return Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)("h3",{children:"List of movies"}),Object(o.jsxs)("div",{className:"table",children:[Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("div",{className:"cell",children:"Title"}),Object(o.jsx)("div",{className:"cell",children:"Year"}),Object(o.jsx)("div",{className:"cell",children:"Runtime"}),Object(o.jsx)("div",{className:"cell",children:"Rating"}),Object(o.jsx)("div",{className:"cell",children:"Comments"})]}),c.map((function(e,t){return Object(o.jsx)(m,{title:e.title,year:e.year,runtime:e.runtime,rating:e.rating},t)}))]})]})};s.a.render(Object(o.jsx)(u,{}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.476eba53.chunk.js.map